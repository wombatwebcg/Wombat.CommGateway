import{d as a,r as e,o as l,c as s,b as t,e as i,w as n,k as o,A as c,g as r,_ as u,n as d,t as m,F as v,z as p,U as g,$ as _,a0 as f,Q as y,P as h,a1 as C,a2 as b,a3 as k,I as w,f as D,h as L,E as z,j as I}from"./index-CNx6aW7Y.js";import{L as N,g as S,a as O,b as V,s as E}from"./log-DkeaWJ2m.js";import{_ as W}from"./_plugin-vue_export-helper-BCo6x5W8.js";const U={class:"log-management-container"},x={class:"page-header"},A={class:"header-right"},F={class:"card-header"},R={class:"header-info"},j={class:"card-content"},B={class:"stat-row"},P={class:"stat-item"},K={class:"stat-value"},T={class:"stat-item"},q={class:"stat-value"},G={class:"level-distribution"},Q={class:"level-count"},$={class:"card-header"},H={class:"header-info"},J={class:"card-content"},M={class:"stat-row"},X={class:"stat-item"},Y={class:"stat-value"},Z={class:"stat-item"},aa={class:"stat-value"},ea={class:"level-distribution"},la={class:"level-count"},sa={class:"card-header"},ta={class:"header-info"},ia={class:"card-content"},na={class:"stat-row"},oa={class:"stat-item"},ca={class:"stat-value"},ra={class:"stat-item"},ua={class:"stat-value"},da={class:"level-distribution"},ma={class:"level-count"},va={class:"actions-content"},pa={class:"action-group"},ga={class:"action-group"},_a={class:"action-group"},fa={class:"card-header"},ya={class:"global-search-content"},ha={key:0,class:"search-results"},Ca={key:0,class:"result-section"},ba={class:"log-time"},ka={class:"log-message"},wa={key:1,class:"result-section"},Da={class:"log-time"},La={class:"log-message"},za={key:2,class:"result-section"},Ia={class:"log-time"},Na={class:"log-message"},Sa=W(a({__name:"index",setup(a){const W=L(),Sa=e({totalCount:0,levelDistribution:{},categoryDistribution:{},recentCount:0}),Oa=e({totalCount:0,levelDistribution:{},categoryDistribution:{},recentCount:0}),Va=e({totalCount:0,levelDistribution:{},categoryDistribution:{},recentCount:0}),Ea=e([]),Wa=e(!1),Ua=e(""),xa=e(null),Aa=e(!1),Fa=e(),Ra=a=>new Date(a).toLocaleString("zh-CN",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),ja=a=>({[V.Debug]:"",[V.Information]:"success",[V.Warning]:"warning",[V.Error]:"danger",[V.Critical]:"danger",[V.Fatal]:"danger"}[a]||""),Ba=a=>({[V.Debug]:"DEBUG",[V.Information]:"INFO",[V.Warning]:"WARN",[V.Error]:"ERROR",[V.Critical]:"CRITICAL",[V.Fatal]:"FATAL"}[a]||"UNKNOWN"),Pa=a=>({[O.System]:"系统",[O.Security]:"安全",[O.Performance]:"性能",[O.Business]:"业务",[O.DataCollection]:"数据采集",[O.Communication]:"通信",[O.Operation]:"操作"}[a]||"未知"),Ka=()=>{W.push("/log/system")},Ta=()=>{W.push("/log/operation")},qa=()=>{W.push("/log/communication")},Ga=()=>{Wa.value=!0,xa.value=null},Qa=async()=>{if(Ua.value.trim())try{const a=await E(Ua.value);xa.value=a}catch(a){z.error("搜索失败，请稍后重试")}else z.warning("请输入搜索关键字")},$a=a=>{Fa.value=a,Aa.value=!0},Ha=()=>{z.info("日志设置功能开发中...")},Ja=()=>{z.info("批量导出功能开发中...")},Ma=()=>{z.info("日志清理功能开发中...")},Xa=()=>{z.info("最近错误功能开发中...")},Ya=()=>{z.info("系统告警功能开发中...")},Za=()=>{z.info("统计分析功能开发中...")},ae=async()=>{try{Ea.value=[{id:"1",timestamp:(new Date).toISOString(),level:V.Information,category:O.System,message:"系统启动完成",properties:{}},{id:"2",timestamp:new Date(Date.now()-6e4).toISOString(),level:V.Warning,category:O.Communication,message:"设备连接超时",properties:{}}]}catch(a){}};return l((()=>{(async()=>{try{const a=await S();Sa.value=a.systemLogs,Oa.value=a.operationLogs,Va.value=a.communicationLogs}catch(a){Sa.value={totalCount:1250,levelDistribution:{[V.Information]:800,[V.Warning]:300,[V.Error]:150},categoryDistribution:{[O.System]:1250},recentCount:45},Oa.value={totalCount:890,levelDistribution:{[V.Information]:650,[V.Warning]:200,[V.Error]:40},categoryDistribution:{[O.Operation]:890},recentCount:23},Va.value={totalCount:2340,levelDistribution:{[V.Information]:2100,[V.Warning]:180,[V.Error]:60},categoryDistribution:{[O.Communication]:2340},recentCount:156}}})(),ae()})),(a,e)=>{const l=r("el-button"),L=r("el-icon"),z=r("el-tag"),S=r("el-card"),V=r("el-col"),E=r("el-row"),W=r("el-button-group"),ee=r("el-table-column"),le=r("el-table"),se=r("el-input"),te=r("el-dialog");return I(),s("div",U,[t("div",x,[e[5]||(e[5]=t("div",{class:"header-left"},[t("h1",{class:"page-title"},"日志管理"),t("p",{class:"page-subtitle"},"系统日志、操作日志、通信日志统一管理")],-1)),t("div",A,[i(l,{type:"primary",icon:o(c),onClick:Ga},{default:n((()=>e[3]||(e[3]=[d(" 全局搜索 ")]))),_:1,__:[3]},8,["icon"]),i(l,{icon:o(u),onClick:Ha},{default:n((()=>e[4]||(e[4]=[d(" 日志设置 ")]))),_:1,__:[4]},8,["icon"])])]),i(E,{gutter:20,class:"overview-row"},{default:n((()=>[i(V,{span:8},{default:n((()=>[i(S,{shadow:"hover",class:"overview-card system-card",onClick:Ka},{header:n((()=>[t("div",F,[t("div",R,[i(L,{class:"card-icon"},{default:n((()=>[i(o(g))])),_:1}),e[6]||(e[6]=t("span",{class:"card-title"},"系统日志",-1))]),i(z,{type:"info",size:"small"},{default:n((()=>e[7]||(e[7]=[d("System")]))),_:1,__:[7]})])])),default:n((()=>[t("div",j,[t("div",B,[t("div",P,[t("span",K,m(Sa.value.totalCount||0),1),e[8]||(e[8]=t("span",{class:"stat-label"},"总数",-1))]),t("div",T,[t("span",q,m(Sa.value.recentCount||0),1),e[9]||(e[9]=t("span",{class:"stat-label"},"今日新增",-1))])]),t("div",G,[(I(!0),s(v,null,p(Sa.value.levelDistribution,((a,e)=>(I(),s("div",{class:"level-item",key:e},[i(z,{type:ja(Number(e)),size:"small"},{default:n((()=>[d(m(Ba(Number(e))),1)])),_:2},1032,["type"]),t("span",Q,m(a||0),1)])))),128))])])])),_:1})])),_:1}),i(V,{span:8},{default:n((()=>[i(S,{shadow:"hover",class:"overview-card operation-card",onClick:Ta},{header:n((()=>[t("div",$,[t("div",H,[i(L,{class:"card-icon"},{default:n((()=>[i(o(_))])),_:1}),e[10]||(e[10]=t("span",{class:"card-title"},"操作日志",-1))]),i(z,{type:"warning",size:"small"},{default:n((()=>e[11]||(e[11]=[d("Operation")]))),_:1,__:[11]})])])),default:n((()=>[t("div",J,[t("div",M,[t("div",X,[t("span",Y,m(Oa.value.totalCount||0),1),e[12]||(e[12]=t("span",{class:"stat-label"},"总数",-1))]),t("div",Z,[t("span",aa,m(Oa.value.recentCount||0),1),e[13]||(e[13]=t("span",{class:"stat-label"},"今日新增",-1))])]),t("div",ea,[(I(!0),s(v,null,p(Oa.value.levelDistribution,((a,e)=>(I(),s("div",{class:"level-item",key:e},[i(z,{type:ja(Number(e)),size:"small"},{default:n((()=>[d(m(Ba(Number(e))),1)])),_:2},1032,["type"]),t("span",la,m(a||0),1)])))),128))])])])),_:1})])),_:1}),i(V,{span:8},{default:n((()=>[i(S,{shadow:"hover",class:"overview-card communication-card",onClick:qa},{header:n((()=>[t("div",sa,[t("div",ta,[i(L,{class:"card-icon"},{default:n((()=>[i(o(f))])),_:1}),e[14]||(e[14]=t("span",{class:"card-title"},"通信日志",-1))]),i(z,{type:"success",size:"small"},{default:n((()=>e[15]||(e[15]=[d("Communication")]))),_:1,__:[15]})])])),default:n((()=>[t("div",ia,[t("div",na,[t("div",oa,[t("span",ca,m(Va.value.totalCount||0),1),e[16]||(e[16]=t("span",{class:"stat-label"},"总数",-1))]),t("div",ra,[t("span",ua,m(Va.value.recentCount||0),1),e[17]||(e[17]=t("span",{class:"stat-label"},"今日新增",-1))])]),t("div",da,[(I(!0),s(v,null,p(Va.value.levelDistribution,((a,e)=>(I(),s("div",{class:"level-item",key:e},[i(z,{type:ja(Number(e)),size:"small"},{default:n((()=>[d(m(Ba(Number(e))),1)])),_:2},1032,["type"]),t("span",ma,m(a||0),1)])))),128))])])])),_:1})])),_:1})])),_:1}),i(S,{shadow:"never",class:"quick-actions-card"},{header:n((()=>e[18]||(e[18]=[t("span",null,"快捷操作",-1)]))),default:n((()=>[t("div",va,[t("div",pa,[e[22]||(e[22]=t("h4",null,"查看日志",-1)),i(W,null,{default:n((()=>[i(l,{type:"primary",onClick:Ka},{default:n((()=>e[19]||(e[19]=[d("系统日志")]))),_:1,__:[19]}),i(l,{type:"warning",onClick:Ta},{default:n((()=>e[20]||(e[20]=[d("操作日志")]))),_:1,__:[20]}),i(l,{type:"success",onClick:qa},{default:n((()=>e[21]||(e[21]=[d("通信日志")]))),_:1,__:[21]})])),_:1})]),t("div",ga,[e[26]||(e[26]=t("h4",null,"日志管理",-1)),i(W,null,{default:n((()=>[i(l,{icon:o(y),onClick:Ja},{default:n((()=>e[23]||(e[23]=[d("批量导出")]))),_:1,__:[23]},8,["icon"]),i(l,{icon:o(h),onClick:Ma},{default:n((()=>e[24]||(e[24]=[d("日志清理")]))),_:1,__:[24]},8,["icon"]),i(l,{icon:o(u),onClick:Ha},{default:n((()=>e[25]||(e[25]=[d("系统设置")]))),_:1,__:[25]},8,["icon"])])),_:1})]),t("div",_a,[e[30]||(e[30]=t("h4",null,"监控告警",-1)),i(W,null,{default:n((()=>[i(l,{icon:o(C),onClick:Xa},{default:n((()=>e[27]||(e[27]=[d("最近错误")]))),_:1,__:[27]},8,["icon"]),i(l,{icon:o(b),onClick:Ya},{default:n((()=>e[28]||(e[28]=[d("系统告警")]))),_:1,__:[28]},8,["icon"]),i(l,{icon:o(k),onClick:Za},{default:n((()=>e[29]||(e[29]=[d("统计分析")]))),_:1,__:[29]},8,["icon"])])),_:1})])])])),_:1}),i(S,{shadow:"never",class:"recent-logs-card"},{header:n((()=>[t("div",fa,[e[32]||(e[32]=t("span",null,"最近日志",-1)),i(l,{type:"primary",link:"",onClick:ae},{default:n((()=>e[31]||(e[31]=[d("刷新")]))),_:1,__:[31]})])])),default:n((()=>[i(le,{data:Ea.value,style:{width:"100%"},"max-height":"300"},{default:n((()=>[i(ee,{prop:"timestamp",label:"时间",width:"180"},{default:n((({row:a})=>[d(m(Ra(a.timestamp)),1)])),_:1}),i(ee,{prop:"level",label:"级别",width:"80"},{default:n((({row:a})=>[i(z,{type:ja(a.level),size:"small"},{default:n((()=>[d(m(Ba(a.level)),1)])),_:2},1032,["type"])])),_:1}),i(ee,{prop:"category",label:"类别",width:"100"},{default:n((({row:a})=>{return[i(z,{type:(e=a.category,{[O.System]:"info",[O.Security]:"warning",[O.Performance]:"success",[O.Business]:"primary",[O.DataCollection]:"",[O.Communication]:"success",[O.Operation]:"warning"}[e]||""),size:"small",effect:"plain"},{default:n((()=>[d(m(Pa(a.category)),1)])),_:2},1032,["type"])];var e})),_:1}),i(ee,{prop:"message",label:"消息","show-overflow-tooltip":""}),i(ee,{label:"操作",width:"100"},{default:n((({row:a})=>[i(l,{type:"primary",link:"",size:"small",onClick:e=>$a(a)},{default:n((()=>e[33]||(e[33]=[d(" 查看 ")]))),_:2,__:[33]},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1}),i(te,{modelValue:Wa.value,"onUpdate:modelValue":e[1]||(e[1]=a=>Wa.value=a),title:"全局日志搜索",width:"60%","destroy-on-close":""},{default:n((()=>[t("div",ya,[i(se,{modelValue:Ua.value,"onUpdate:modelValue":e[0]||(e[0]=a=>Ua.value=a),placeholder:"输入关键字搜索所有类型的日志",clearable:"",onKeyup:D(Qa,["enter"])},{append:n((()=>[i(l,{icon:o(c),onClick:Qa},null,8,["icon"])])),_:1},8,["modelValue"]),xa.value?(I(),s("div",ha,[xa.value.systemLogs.length>0?(I(),s("div",Ca,[t("h4",null,"系统日志 ("+m(xa.value.systemLogs.length)+")",1),(I(!0),s(v,null,p(xa.value.systemLogs,(a=>(I(),s("div",{key:a.id,class:"search-item"},[t("span",ba,m(Ra(a.timestamp)),1),t("span",ka,m(a.message),1),i(l,{type:"primary",link:"",size:"small",onClick:e=>$a(a)},{default:n((()=>e[34]||(e[34]=[d("查看")]))),_:2,__:[34]},1032,["onClick"])])))),128))])):w("",!0),xa.value.operationLogs.length>0?(I(),s("div",wa,[t("h4",null,"操作日志 ("+m(xa.value.operationLogs.length)+")",1),(I(!0),s(v,null,p(xa.value.operationLogs,(a=>(I(),s("div",{key:a.id,class:"search-item"},[t("span",Da,m(Ra(a.timestamp)),1),t("span",La,m(a.message),1),i(l,{type:"primary",link:"",size:"small",onClick:e=>$a(a)},{default:n((()=>e[35]||(e[35]=[d("查看")]))),_:2,__:[35]},1032,["onClick"])])))),128))])):w("",!0),xa.value.communicationLogs.length>0?(I(),s("div",za,[t("h4",null,"通信日志 ("+m(xa.value.communicationLogs.length)+")",1),(I(!0),s(v,null,p(xa.value.communicationLogs,(a=>(I(),s("div",{key:a.id,class:"search-item"},[t("span",Ia,m(Ra(a.timestamp)),1),t("span",Na,m(a.message),1),i(l,{type:"primary",link:"",size:"small",onClick:e=>$a(a)},{default:n((()=>e[36]||(e[36]=[d("查看")]))),_:2,__:[36]},1032,["onClick"])])))),128))])):w("",!0)])):w("",!0)])])),_:1},8,["modelValue"]),i(N,{modelValue:Aa.value,"onUpdate:modelValue":e[2]||(e[2]=a=>Aa.value=a),"log-data":Fa.value},null,8,["modelValue","log-data"])])}}}),[["__scopeId","data-v-1f151675"]]);export{Sa as default};

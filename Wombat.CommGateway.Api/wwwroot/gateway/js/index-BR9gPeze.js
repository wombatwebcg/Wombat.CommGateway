import{d as e,u as a,r as s,a as l,o as r,c as o,b as n,e as i,w as u,f as t,g as d,h as m,i as p,j as c,k as f,l as g,m as _,n as v,E as w}from"./index-BKaj1bP9.js";import{_ as y}from"./logo-D0IE-A81.js";import{_ as x}from"./_plugin-vue_export-helper-BCo6x5W8.js";const b={class:"login-container"},h={class:"login-box"},V=x(e({__name:"index",setup(e){const x=m(),V=p(),j=a(),k=s(),q=s(!1),U=l({username:"admin",password:"admin"}),A={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:0,message:"密码长度不能小于6位",trigger:"blur"}]},C=async()=>{k.value&&await k.value.validate((async e=>{if(e){q.value=!0;try{const e=await j.loginAction(U.username,U.password);if(e&&e.token){w.success("登录成功");const e=V.query.redirect;await x.replace(e||"/config")}else w.error("登录失败：未获取到有效的登录信息")}catch(a){w.error(a.message||"登录失败")}finally{q.value=!1}}}))};return r((()=>{k.value&&k.value.validate()})),(e,a)=>{const s=d("el-input"),l=d("el-form-item"),r=d("el-button"),m=d("el-form");return c(),o("div",b,[n("div",h,[a[3]||(a[3]=n("div",{class:"login-header"},[n("img",{src:y,alt:"Logo",class:"logo"}),n("h2",null,"工业网关管理系统")],-1)),i(m,{ref_key:"formRef",ref:k,model:U,rules:A,class:"login-form",onKeyup:t(C,["enter"])},{default:u((()=>[i(l,{prop:"username"},{default:u((()=>[i(s,{modelValue:U.username,"onUpdate:modelValue":a[0]||(a[0]=e=>U.username=e),placeholder:"用户名","prefix-icon":f(g)},null,8,["modelValue","prefix-icon"])])),_:1}),i(l,{prop:"password"},{default:u((()=>[i(s,{modelValue:U.password,"onUpdate:modelValue":a[1]||(a[1]=e=>U.password=e),type:"password",placeholder:"密码","prefix-icon":f(_),"show-password":""},null,8,["modelValue","prefix-icon"])])),_:1}),i(l,null,{default:u((()=>[i(r,{loading:q.value,type:"primary",class:"login-button",onClick:C},{default:u((()=>a[2]||(a[2]=[v(" 登录 ")]))),_:1,__:[2]},8,["loading"])])),_:1})])),_:1},8,["model"])])])}}}),[["__scopeId","data-v-646e1fb7"]]);export{V as default};
